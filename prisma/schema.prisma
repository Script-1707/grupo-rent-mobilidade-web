generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Single model for users to support local auth and OAuth (Google) later.
enum AuthProvider {
  LOCAL
  GOOGLE
}

// Roles for authorization
enum Role {
  PUBLIC
  ADMIN
}

model User {
  id            Int          @id @default(autoincrement())
  email         String       @unique
  name          String?
  password      String?      // hashed password for local auth; null for OAuth-only users
  role          Role         @default(PUBLIC)
  provider      AuthProvider @default(LOCAL)
  providerId    String?      // provider-specific id (e.g., Google sub)
  emailVerified DateTime?
  image         String?
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt

  @@map("users")
}
